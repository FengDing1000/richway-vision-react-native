(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"4msm":function(e,t,n){"use strict";var s=n("uyAU");n.n(s).a},"6gJb":function(e,t,n){},k4Mn:function(e,t,n){"use strict";n.r(t);var s={name:"Legend",props:{title:{type:String,default:"图例"},list:{type:Array,default:()=>[]},column:{type:Number,default:3},showClose:{type:Boolean,default:!1},type:{type:String,default:"transverse"}},data:()=>({showContent:!0}),computed:{colColumn(){return`col-column-${this.column}`}},methods:{handleHide(){this.$emit("on-hide")},changeLegend(e={}){this.$emit("on-click",e)}}},i=(n("4msm"),n("KHd+")),o=Object(i.a)(s,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"legend-panel"},[n("div",{staticClass:"legend-header"},[n("span",[e._v(e._s(e.title))]),e._v(" "),e.showClose?n("i",{staticClass:"richway-icon icon-down-arrow toggle-btn",on:{click:e.handleHide}}):e._e()]),e._v(" "),n("div",{staticClass:"legend-content",class:[e.colColumn,"transverse"===e.type?"transverse":"vertical"]},[e.list.length?n("ul",{staticClass:"richway-clear"},e._l(e.list,function(t,s){return n("li",{key:s,class:[t.visibility?"active":""],on:{click:function(n){e.changeLegend(t)}}},[n("span",{staticClass:"legend-icon",class:[t.icon.className],domProps:{innerHTML:e._s(t.icon.legend||t.icon.html)}}),e._v(" "),n("span",{staticClass:"legend-title richway-elip"},[e._v(e._s(t.icon.title))])])})):n("p",[e._v("暂时没有图例")])])])},[],!1,null,"4deeaa82",null);o.options.__file="index.vue";var a={name:"LegendControl",components:{LegendPanel:o.exports},props:{position:{type:String,default:""},config:{type:Object,default:()=>({})}},data:()=>({popupVisible:!1,currentLegendInfo:{},legendList:[]}),computed:{},mounted(){this.$mapLayersFun.MapBusinessLayersChangeListenFun(()=>{this.getLegends()}),setTimeout(()=>{"show"===this.config.toggle&&(this.popupVisible=!0)},1e3)},methods:{handleClick(){this.popupVisible=!0},getLegends(){const e=[];this.currentLegendInfo={};for(const t in window._RichWay.$map.businessLayers)if(Object.hasOwnProperty.call(window._RichWay.$map.businessLayers,t)){const n=window._RichWay.$map.businessLayers[t];n.code||(n.code=t),!0===n.controllByLegend&&(e.push(n),this.currentLegendInfo[n.code]=n.visibility)}this.legendList=e.sort((e,t)=>parseFloat(`${e.legendSort}`)-parseFloat(`${t.legendSort}`))},changeLegend(e={}){this.currentLegendInfo[e.code]=!this.currentLegendInfo[e.code];for(const t of this.legendList)e.code===t.code&&(!0===this.currentLegendInfo[e.code]?"function"==typeof(e.layer||{}).createGraphics&&e.layer.createGraphics():"function"==typeof(e.layer||{}).clearGraphics&&e.layer.clearGraphics())}}},c=(n("xFvj"),Object(i.a)(a,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bar-item bar-btn richway-touch-btn"},[n("i",{staticClass:"richway-icon bar-legend",class:[e.config.icon||"icon-shebei"],on:{click:e.handleClick}}),e._v(" "),n("mt-popup",{staticClass:"base-legend-popup",attrs:{position:"bottom"},model:{value:e.popupVisible,callback:function(t){e.popupVisible=t},expression:"popupVisible"}},[n("LegendPanel",{attrs:{list:e.legendList,type:e.config.type},on:{"on-click":e.changeLegend}})],1)],1)},[],!1,null,"0ba420b9",null));c.options.__file="baseLegend.vue";t.default=c.exports},uyAU:function(e,t,n){},xFvj:function(e,t,n){"use strict";var s=n("6gJb");n.n(s).a}}]);